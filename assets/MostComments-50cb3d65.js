import{r as n,j as e,i as g}from"./index-d8fa4cee.js";import{u as x}from"./useSearchParams-3c830439.js";import{b as f,L as h,e as y,D as j,C as b}from"./App-8c327c57.js";import{s as w}from"./search-da0d918e.js";import{S as N}from"./ShowJobsInMap-be9b7704.js";import{l as v}from"./TileLayer-7e84408f.js";import"./index.modern-44684203.js";async function S({category_id:o,city_ids:s,key:r}){return await w({type:3,key:r,city_id:s,category_id:o})}function R({className:o}){var m;const[s,r,i]=x(a=>[a.data.key,a.data.category_id,a.data.city_id]),{data:t,error:u,isLoading:d,mutate:c}=f("search/most-comments",async()=>S({category_id:r,city_ids:i,key:s}),{shouldRetryOnError:!1}),[p,l]=n.useState(d);return n.useEffect(()=>{l(!0),c().then(()=>l(!1))},[s]),n.useEffect(()=>{l(!0),c().then(()=>l(!1))},[i,r]),d?e.jsx(h,{}):e.jsxs("div",{className:"w-full h-max",children:[((m=t==null?void 0:t.data)==null?void 0:m.length)>0?e.jsx(N,{latlng:t.data.map(a=>({title:a.title,latlng:new v.LatLng(a.lat,a.lng)})),children:e.jsx("div",{className:`fixed z-30 bottom-4 left-4 p-3 rounded-xl bg-blue-500\r
      shadow-md shadow-black/10 grid place-items-center cursor-pointer`,children:e.jsx(y,{className:"w-4 h-4 fill-gray-50"})})}):null,u?e.jsx("p",{children:"Something went wrong"}):e.jsx(j,{containerClassName:"grid grid-cols-1 md:grid-cols-2 gap-6",title:"",dataProvider:t==null?void 0:t.data,dataRenderer:a=>e.jsx(b,{title:a.title,category:a.category,address:a.address,city:a.city,discount:a.discount,id:a.id,image:a.image,lat:a.lat,lng:a.lng,rate:a.rate,rate_count:a.rate_count,link:g()+"/jobs/"+a.id},a.id),emptyFallback:e.jsxs("div",{className:"w-full p-10 grid place-items-center",children:[e.jsx("img",{alt:"no data",src:g()+"/images/noItem.png",className:"w-28 h-auto border border-purple-600 inline-block"}),e.jsx("p",{className:"text-sm text-slate-800 font-[vazirMedium] mt-3.5",children:"هیچ موردی وجود ندارد"})]}),loading:e.jsx("div",{className:"w-full h-72 grid place-items-center",children:e.jsxs("div",{className:`p-4 px-6 rounded-2xl flex flex-col items-center justify-center gap-y-5 bg-blue-500/80\r
            shadow-lg shadow-black/5`,children:[e.jsx("p",{className:"text-base text-slate-50 font-[vazir]",children:"درحال لود"}),e.jsx("div",{className:"w-10 h-10 border-t border-t-white rounded-full animate-spin"})]})}),isLoading:p})]})}export{R as default};
