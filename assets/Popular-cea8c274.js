import{r as i,j as e,k as p}from"./index-1c5df3ed.js";import{u as f}from"./useSearchParams-59be9835.js";import{t as m,D as x}from"./App-1c09dd7c.js";import{s as h}from"./search-952add8d.js";import{C as y}from"./Card_1-cbeea0d1.js";import"./index.esm-648076ae.js";async function j({category_id:l=void 0,city_id:t=void 0,key:s=void 0}){return await h({type:1,key:s,category_id:l,city_id:t})}function S({className:l}){const[t,s,d]=f(a=>[a.data.key,a.data.category_id,a.data.city_id]),{data:o,error:c,isLoading:u,mutate:n}=m("search/popular",async()=>j({category_id:s,city_id:d,key:t}),{shouldRetryOnError:!1}),[g,r]=i.useState(u);return i.useEffect(()=>{r(!0),n().then(()=>r(!1))},[t]),i.useEffect(()=>{r(!0),n().then(()=>r(!1))},[d,s]),e.jsx("div",{className:"w-full h-max",children:c?e.jsx("p",{children:"Something went wrong"}):e.jsx(x,{containerClassName:"grid grid-cols-2 gap-6",title:"",dataProvider:o==null?void 0:o.data,dataRenderer:a=>e.jsx(y,{title:a.title,category:a.category,address:a.address,city:a.city,discount:a.discount,id:a.id,image:a.image,lat:a.lat,lng:a.lng,rate:a.rate,rate_count:a.rate_count},a.id),emptyFallback:e.jsx("div",{className:"w-full p-10 grid place-items-center",children:e.jsx("img",{alt:"no data",src:p()+"/assets/images/no-data.svg",className:"w-72 h-auto border border-purple-600 inline-block"})}),loading:e.jsx("div",{className:"w-full h-72 grid place-items-center",children:e.jsxs("div",{className:`p-4 px-6 rounded-2xl flex flex-col items-center justify-center gap-y-5 bg-blue-500/80\r
            shadow-lg shadow-black/5`,children:[e.jsx("p",{className:"text-base text-slate-50 font-[iranyekan300]",children:"درحال لود"}),e.jsx("div",{className:"w-10 h-10 border-t border-t-white rounded-full animate-spin"})]})}),isLoading:g})})}export{S as default};
