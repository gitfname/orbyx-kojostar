import{j as e,y as H,r as v}from"./index-f0cea57c.js";import{n as _,q as M,G as S,r as C,R as B,t as I,l as z,v as E,w as R,B as A,x as O}from"./App-8131e67c.js";async function L({jobId:t}){const l={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+_.getState().user.token}},n=await fetch(M+"?id="+t,l);if(n.ok)return await n.json();throw n.status===404?new Error("not found"):new Error("unknown error")}function T(t){return S({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M235.4 172.2c0-11.4 9.3-19.9 20.5-19.9 11.4 0 20.7 8.5 20.7 19.9s-9.3 20-20.7 20c-11.2 0-20.5-8.6-20.5-20zm1.4 35.7H275V352h-38.2V207.9z"}},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"}}]})(t)}function G(t){return S({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.243 3.03a1 1 0 01.727 1.213L9.53 6h2.94l.56-2.243a1 1 0 111.94.486L14.53 6H17a1 1 0 110 2h-2.97l-1 4H15a1 1 0 110 2h-2.47l-.56 2.242a1 1 0 11-1.94-.485L10.47 14H7.53l-.56 2.242a1 1 0 11-1.94-.485L5.47 14H3a1 1 0 110-2h2.97l1-4H5a1 1 0 110-2h2.47l.56-2.243a1 1 0 011.213-.727zM9.03 8l-1 4h2.938l1-4H9.031z",clipRule:"evenodd"}}]})(t)}function J({data:t}){var l,n,s,a,c,o,i;return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-x-3",children:[(l=t==null?void 0:t.user)!=null&&l.avatar&&((s=(n=t==null?void 0:t.user)==null?void 0:n.avatar)==null?void 0:s.trim())!==""?e.jsx("img",{loading:"lazy",alt:"",src:(a=t==null?void 0:t.user)==null?void 0:a.avatar,className:"w-11 h-11 rounded-full object-center object-cover shadow-sm shadow-black/10"}):e.jsx("div",{className:"w-11 h-11 rounded-full bg-blue-500/80 grid place-items-center",children:e.jsx("p",{className:"text-slate-800 text-xs font-[iranyekan300]",children:(o=(c=t==null?void 0:t.user)==null?void 0:c.first_name)==null?void 0:o[0]})}),e.jsx("p",{className:"text-sm text-slate-800 font-[iranyekan400]",children:(i=t==null?void 0:t.user)==null?void 0:i.first_name})]}),e.jsx(B,{max:5,positive:Math.floor(t==null?void 0:t.rate)})]}),e.jsxs("div",{className:"mt-5 w-full flex items-center justify-between gap-8",children:[e.jsx("p",{className:"text-xs text-slate-700/95 font-[iranyekan400]",children:t==null?void 0:t.content}),e.jsx("p",{className:"text-xs text-blue-700/70 font-[iranyekan400]",children:t==null?void 0:t.date})]})]})}function U({comments:t,showJob:l=!1,showTopSection:n=!0}){return e.jsxs("div",{className:"w-full px-4",children:[n?e.jsxs("div",{className:"flex items-center justify-between mb-12",children:[e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsx(C,{className:"w-5 h-5 fill-blue-500"}),e.jsx("p",{className:"text-sm text-slate-800 font-[iranyekan400]",children:"نظرات"})]}),e.jsx("p",{className:"text-xs text-blue-500 font-[iranyekan400]",children:"همه نظرات"})]}):!1,e.jsx("div",{className:"flex flex-col gap-y-6 w-full",children:t==null?void 0:t.map(s=>e.jsx(J,{data:s},s==null?void 0:s.id))})]})}async function D({job_id:t}){const l=I+"?job_id="+t,n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+_.getState().user.token}},s=await fetch(l,n);if(s.ok)return await s.json();throw new Error("something went wrong")}function F(t){let l="شنبه";switch(t){case 0:l="شنبه";break;case 1:l="یکشنبه";break;case 2:l="دو شنبه";break;case 3:l="سه شنبه";break;case 4:l="چهار شنبه";break;case 5:l="پنج شنبه";break;case 6:l="جمعه";break}return l}function q(){var i,m,f,h,j,u,d,g,b,N,k,p,y,w;const{id:t}=H(),[l,n]=v.useState(!1),{data:s,error:a,isLoading:c}=z("job/view/"+t,async()=>L({jobId:parseInt(t)}),{shouldRetryOnError:!1}),o=r=>{D({job_id:r}).then(x=>{n(x==null?void 0:x.is_bookmarked)})};return v.useEffect(()=>{n(s==null?void 0:s.is_bookmarked)},[s==null?void 0:s.is_bookmarked]),c?e.jsx("p",{children:"loading"}):a?e.jsx("p",{children:"something went wrong"}):e.jsxs("div",{className:"h-screen overflow-y-auto pb-32",children:[(i=s==null?void 0:s.job)!=null&&i.medias&&((f=(m=s==null?void 0:s.job)==null?void 0:m.medias)==null?void 0:f.length)>0?e.jsx("img",{alt:"",src:(j=(h=s==null?void 0:s.job)==null?void 0:h.medias[0])==null?void 0:j.url,className:"w-full h-[26rem] object-center object-cover shadow-md shadow-black/10"}):e.jsx("div",{dir:"ltr",className:"w-full h-[20rem] bg-slate-200 grid items-center",children:e.jsx("p",{className:"text-3xl text-center font-[iranyekan600] text-slate-600",children:"No Image :("})}),e.jsx("div",{className:"mt-6 w-full flex items-center justify-center gap-x-3",children:e.jsx(B,{max:5,positive:Math.floor((u=s==null?void 0:s.job)==null?void 0:u.rate)})}),e.jsxs("div",{className:"flex items-center gap-x-2 px-4 mt-6",children:[e.jsx("div",{onClick:()=>o(s==null?void 0:s.job.id),className:`p-1.5 rounded-lg hover:bg-transparent/5 active:scale-95 transition-transform duration-300\r
                    cursor-pointer`,children:l?e.jsx(E,{className:"w-5 h-5 fill-blue-500"}):e.jsx(R,{className:"w-5 h-5 fill-blue-500"})}),e.jsx("p",{className:"text-sm text-slate-800 font-[iranyekan400]",children:"محبوبیت"})]}),e.jsxs("div",{className:"flex items-center gap-x-2 px-4 mt-9",children:[e.jsx(T,{className:"w-5 h-5 fill-blue-500"}),e.jsx("p",{className:"text-sm text-slate-800 font-[iranyekan400]",children:"اطلاعات مجموعه"})]}),e.jsx("div",{className:"mt-4 w-full px-5",children:e.jsxs("div",{className:"w-full rounded-xl bg-blue-500/10 p-5 flex flex-col gap-y-4",children:[e.jsxs("p",{className:"text-xs text-slate-500 font-[iranyekan300]",children:["نام مجموعه :  ",e.jsx("span",{className:"text-slate-800 font-[iranyekan400]",children:(d=s==null?void 0:s.job)==null?void 0:d.title})]}),e.jsxs("p",{className:"text-xs text-slate-500 font-[iranyekan300]",children:["نام گروه :  ",e.jsx("span",{className:"text-slate-800 font-[iranyekan400]"})]}),e.jsxs("p",{className:"text-xs text-slate-500 font-[iranyekan300]",children:["شماره تماس :  ",e.jsx("div",{className:"inline-flex items-center gap-x-2.5",children:(b=(g=s==null?void 0:s.job)==null?void 0:g.phones)==null?void 0:b.map(r=>e.jsx("span",{className:"text-blue-500 cursor-pointer font-[iranyekan400]",children:r},r))})]}),e.jsxs("p",{className:"text-xs text-slate-500 font-[iranyekan300]",children:["آدرس :  ",e.jsx("span",{className:"text-slate-800 font-[iranyekan400]",children:(N=s==null?void 0:s.job)==null?void 0:N.address})]})]})}),e.jsxs("div",{className:"flex items-center gap-x-2 px-4 mt-9",children:[e.jsx(A,{className:"w-5 h-5 fill-blue-500"}),e.jsx("p",{className:"text-sm text-slate-800 font-[iranyekan400]",children:"توضیحات"})]}),e.jsx("div",{className:"mt-4 w-full px-5",children:e.jsx("div",{className:"w-full rounded-xl bg-blue-500/10 p-5 flex flex-col gap-y-4",children:e.jsx("p",{className:"text-xs text-slate-800 font-[iranyekan300]",children:(k=s==null?void 0:s.job)==null?void 0:k.description})})}),e.jsxs("div",{className:"flex items-center gap-x-2 px-4 mt-9",children:[e.jsx(G,{className:"w-5 h-5 fill-blue-500"}),e.jsx("p",{className:"text-sm text-slate-800 font-[iranyekan400]",children:"هشتگ"})]}),e.jsx("div",{className:"flex items-center gap-x-2 px-4 mt-4",children:(y=(p=s==null?void 0:s.job)==null?void 0:p.hashtags)==null?void 0:y.map(r=>e.jsx("p",{className:"py-1.5 cursor-default px-3 rounded-3xl text-xs text-slate-800 font-[iranyekan300] bg-blue-500/30",children:r}))}),e.jsxs("div",{className:"flex items-center gap-x-2 px-4 mt-9",children:[e.jsx(O,{className:"w-5 h-5 fill-blue-500"}),e.jsx("p",{className:"text-sm text-slate-800 font-[iranyekan400]",children:"ساعات کاری مجموعه"})]}),e.jsx("div",{className:"mt-4 grid grid-cols-4 gap-3 px-4",children:(w=s==null?void 0:s.plan)==null?void 0:w.map(r=>e.jsxs("div",{className:`flex flex-col gap-y-2 py-4 justify-center border border-blue-500 ${r!=null&&r.is_holiday?"bg-blue-500/20":"bg-white"} rounded-xl`,children:[e.jsx("p",{className:"text-center text-slate-800 text-xs font-[iranyekan400]",children:F(r==null?void 0:r.day)}),r!=null&&r.is_holiday?e.jsx("p",{className:"text-center text-slate-800 text-xs font-[iranyekan400]",children:"تعطیل"}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-center text-slate-800 text-xs font-[iranyekan400]",children:[r==null?void 0:r.start_morning_time," - ",r==null?void 0:r.end_morning_time]}),e.jsxs("p",{className:"text-center text-slate-800 text-xs font-[iranyekan400]",children:[r==null?void 0:r.start_afternoon_time," - ",r==null?void 0:r.end_afternoon_time]})]})]}))}),e.jsx("div",{className:"mt-16 w-full",children:e.jsx(U,{comments:s==null?void 0:s.comments})})]})}export{q as default};
