import{j as e,L as m,r as i}from"./index-d8fa4cee.js";import{u as o,v as d,w as x,d as n,R as u,x as f,b as h,L as g}from"./App-8c327c57.js";import{c as p}from"./checkAuth-4f350946.js";async function w(){const t=d,a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o.getState().user.token}},l=await fetch(t,a);if(l.ok)return await l.json();throw new Error("something went wrong")}async function v(){await p()||x.navigate(n.pages.home)}function N({content:t,date:a,id:l,job:s,rate:j,status:c,time:k,user:z}){var r;return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-x-3",children:[((r=s==null?void 0:s.image)==null?void 0:r.length)>20?e.jsx("img",{loading:"lazy",alt:"",src:s==null?void 0:s.image,className:"w-11 h-11 rounded-full object-center object-cover shadow-sm shadow-black/10"}):e.jsx("div",{className:"w-11 h-11 rounded-full bg-blue-500/80 grid place-items-center",children:e.jsx("p",{className:"text-slate-800 text-xs font-[vazirMedium]",children:s==null?void 0:s.title[0]})}),e.jsx("p",{className:"text-sm text-slate-800 font-[vazir]",children:s==null?void 0:s.title})]}),e.jsx(u,{max:5,positive:Math.floor(s.rate)})]}),e.jsxs("div",{className:"mt-5 w-full flex items-center justify-between gap-8",children:[e.jsx("p",{className:"text-xs text-slate-700/95 font-[vazir]",children:t}),e.jsx("p",{className:"text-xs text-blue-700/70 font-[vazir]",children:a})]}),e.jsx(e.Fragment,{children:c===0?e.jsxs("div",{className:"flex items-center gap-x-1 mt-8",children:[e.jsx(f,{className:"w-4 h-4 fill-blue-500"}),e.jsx("p",{className:"text-xs text-blue-600 font-[vazir]",children:"در انتظار تایید"})]}):!1})]})}function y(t){return e.jsx(m,{to:n.pages.singleJob(t.job.id),className:"block w-full p-4 rounded-xl hover:bg-blue-500/10 transition-colors duration-300",children:e.jsx(N,{...t})})}function M(){i.useEffect(()=>{v()},[]);const{data:t,error:a,isLoading:l}=h("my-comments",async()=>w(),{shouldRetryOnError:!1});return l?e.jsx(g,{}):a?e.jsx("p",{children:"Error"}):e.jsx("div",{className:"w-full max-lg:h-full h-screen overflow-y-auto",children:e.jsxs("div",{className:"w-full h-max px-4 py-8",children:[e.jsx("p",{className:"text-lg text-slate-800 font-[vazirMedium]",children:"نظر های من"}),e.jsx("div",{className:"mt-12 w-full flex flex-col gap-y-7",children:t.data.map(s=>e.jsxs(e.Fragment,{children:[i.createElement(y,{...s,key:s.id}),e.jsx("div",{className:"w-11/12 mx-auto border-b border-b-slate-200"})]}))})]})})}export{M as default};
