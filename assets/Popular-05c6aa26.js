import{r as m,j as e,i as n}from"./index-d8fa4cee.js";import{u}from"./useSearchParams-3c830439.js";import{b as g,L as x,e as f,D as h,C as y}from"./App-8c327c57.js";import{s as j}from"./search-da0d918e.js";import{S as w}from"./ShowJobsInMap-be9b7704.js";import{l as b}from"./TileLayer-7e84408f.js";import"./index.modern-44684203.js";async function v({category_id:i=void 0,city_id:t=void 0,key:r=void 0}){return await j({type:1,key:r,category_id:i,city_id:t})}function P({className:i}){var o;const[t,r,l]=u(a=>[a.data.key,a.data.category_id,a.data.city_id]),{data:s,error:c,isLoading:d,mutate:p}=g("search/popular",async()=>v({category_id:r,city_id:l,key:t}),{shouldRetryOnError:!1,revalidateOnFocus:!1});return m.useEffect(()=>{p()},[t,l,r]),d?e.jsx(x,{}):e.jsxs("div",{className:"w-full h-max",children:[((o=s==null?void 0:s.data)==null?void 0:o.length)>0?e.jsx(w,{latlng:s.data.map(a=>({title:a.title,latlng:new b.LatLng(a.lat,a.lng)})),children:e.jsx("div",{className:`fixed z-30 bottom-4 left-4 p-3 rounded-xl bg-blue-500\r
      shadow-md shadow-black/10 grid place-items-center cursor-pointer`,children:e.jsx(f,{className:"w-4 h-4 fill-gray-50"})})}):null,c?e.jsx("p",{children:"Something went wrong"}):e.jsx(h,{containerClassName:"grid grid-cols-1 md:grid-cols-2 gap-6",title:"",dataProvider:s==null?void 0:s.data,dataRenderer:a=>e.jsx(y,{title:a.title,category:a.category,address:a.address,city:a.city,discount:a.discount,id:a.id,image:a.image,lat:a.lat,lng:a.lng,rate:a.rate,rate_count:a.rate_count,link:n()+"/jobs/"+a.id},a.id),emptyFallback:e.jsxs("div",{className:"w-full p-10 grid place-items-center",children:[e.jsx("img",{alt:"no data",src:n()+"/images/noItem.png",className:"w-28 h-auto border border-purple-600 inline-block"}),e.jsx("p",{className:"text-sm text-slate-800 font-[vazirMedium] mt-3.5",children:"هیچ موردی وجود ندارد"})]}),loading:e.jsx("div",{className:"w-full h-72 grid place-items-center",children:e.jsxs("div",{className:`p-4 px-6 rounded-2xl flex flex-col items-center justify-center gap-y-5 bg-blue-500/80\r
            shadow-lg shadow-black/5`,children:[e.jsx("p",{className:"text-base text-slate-50 font-[vazir]",children:"درحال لود"}),e.jsx("div",{className:"w-10 h-10 border-t border-t-white rounded-full animate-spin"})]})}),isLoading:d})]})}export{P as default};
