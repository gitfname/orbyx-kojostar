import{j as e,L as o,r}from"./index-06435b8c.js";import{m as i,x as d,y as m,z as x,A as l,R as u,E as f,l as h}from"./App-9463a69e.js";async function g({}){const s=d,a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i.getState().user.token}},n=await fetch(s,a);if(n.ok)return await n.json();throw new Error("something went wrong")}async function p({token:s}){const a=m,n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}},t=await fetch(a,n);if(t.ok)return await t.json();throw new Error("something went wrong")}async function w(){return!!(await p({token:i.getState().user.token})).is_logged_in}async function y(){await w()||x.navigate(l.pages.home)}function k({content:s,date:a,id:n,job:t,rate:j,status:c,time:v,user:E}){return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-x-3",children:[(t==null?void 0:t.image.trim())!==""?e.jsx("img",{loading:"lazy",alt:"",src:t==null?void 0:t.image,className:"w-11 h-11 rounded-full object-center object-cover shadow-sm shadow-black/10"}):e.jsx("div",{className:"w-11 h-11 rounded-full bg-blue-500/80 grid place-items-center",children:e.jsx("p",{className:"text-slate-800 text-xs font-[iranyekan300]",children:t==null?void 0:t.title[0]})}),e.jsx("p",{className:"text-sm text-slate-800 font-[iranyekan400]",children:t==null?void 0:t.title})]}),e.jsx(u,{max:5,positive:Math.floor(t.rate)})]}),e.jsxs("div",{className:"mt-5 w-full flex items-center justify-between gap-8",children:[e.jsx("p",{className:"text-xs text-slate-700/95 font-[iranyekan400]",children:s}),e.jsx("p",{className:"text-xs text-blue-700/70 font-[iranyekan400]",children:a})]}),e.jsx(e.Fragment,{children:c===0?e.jsxs("div",{className:"flex items-center gap-x-1 mt-8",children:[e.jsx(f,{className:"w-4 h-4 fill-blue-500"}),e.jsx("p",{className:"text-xs text-blue-600 font-[iranyekan400]",children:"در انتظار تایید"})]}):!1})]})}function N(s){return e.jsx(o,{to:l.pages.singleJob(s.job.id),className:"block w-full p-4 rounded-xl hover:bg-blue-500/10 transition-colors duration-300",children:e.jsx(k,{...s})})}function L(){r.useEffect(()=>{y()},[]);const{data:s,error:a,isLoading:n}=h("my-comments",async()=>g({}),{shouldRetryOnError:!1});return n?e.jsx("p",{children:"Loading"}):a?e.jsx("p",{children:"Error"}):e.jsx("div",{className:"w-full h-screen overflow-y-auto",children:e.jsxs("div",{className:"w-full h-max px-4 py-8",children:[e.jsx("p",{className:"text-lg text-slate-800 font-[iranyekan400]",children:"نظر های من"}),e.jsx("div",{className:"mt-12 w-full flex flex-col gap-y-7",children:s.data.map(t=>e.jsxs(e.Fragment,{children:[r.createElement(N,{...t,key:t.id}),e.jsx("div",{className:"w-11/12 mx-auto border-b border-b-slate-200"})]}))})]})})}export{L as default};
