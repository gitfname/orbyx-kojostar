import{m as g,j as n}from"./index-d8fa4cee.js";import{u as r,N as y,b as h}from"./App-8c327c57.js";import{g as m}from"./index-475e6dc5.js";import{M as f}from"./Modal_1-9bec9291.js";async function S({city_id:s}){const a={method:"POST",headers:{Authorization:"Bearer"+r.getState().user.token,"Content-Type":"application/json"},body:JSON.stringify({city_id:s})},i=await fetch(y,a);if(i.ok)return await i.json();throw new Error("something went wrong while updating city_id")}function x({children:s}){const[a,i]=r(t=>[t.api.set_city_id,t.api.set_city]),[o]=g(t=>[t.setIsLoading]),{data:d,error:c,isLoading:p}=h("sort-modal/getCitiesAndState",async()=>m(),{shouldRetryOnError:!1});if(p)return n.jsx("p",{children:"Loading"});if(c)return n.jsx("p",{children:"error"});const l={data:[{title:"انتخاب شهر",data:d.data.map(t=>({id:t.id,is_parent:t.is_parent,title:t.name,command(_,u){o(!0),S({city_id:u.id}).then(e=>{a(e.data.city_id),i(e.data.city),console.log(e),o(!1)}).catch(e=>{console.log(e),o(!1)})}}))}]};return n.jsx(f,{activeItem:[r.getState().user.city_id],showCheckBox:!1,onActiveItemChange:void 0,data:l,title:"انتخاب شهر",children:s})}export{x as S};
