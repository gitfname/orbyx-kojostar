import{r as d,j as e,J as m}from"./index-db770455.js";import{u as p}from"./useSearchParams-56119927.js";import{a as h,n as f,o as y,B as j,D as w,p as b}from"./App-6afbcefa.js";import{s as N,S as v}from"./ShowJobsInMap-70095ebe.js";async function S({category_id:i,city_ids:t,key:r}){return await N({type:3,key:r,city_id:t,category_id:i})}function M({className:i}){var g;const[t,r,n]=p(a=>[a.data.key,a.data.category_id,a.data.city_id]),{data:s,error:u,isLoading:o,mutate:c}=h("search/most-comments",async()=>S({category_id:r,city_ids:n,key:t}),{shouldRetryOnError:!1}),[x,l]=d.useState(o);return d.useEffect(()=>{l(!0),c().then(()=>l(!1))},[t]),d.useEffect(()=>{l(!0),c().then(()=>l(!1))},[n,r]),o?e.jsx(f,{}):e.jsxs("div",{className:"w-full h-max",children:[((g=s==null?void 0:s.data)==null?void 0:g.length)>0?e.jsx(v,{latlng:s.data.map(a=>({title:a.title,latlng:new y.LatLng(a.lat,a.lng)})),children:e.jsx("div",{className:`fixed z-30 bottom-4 left-4 p-3 rounded-xl bg-blue-500\r
      shadow-md shadow-black/10 grid place-items-center cursor-pointer`,children:e.jsx(j,{className:"w-4 h-4 fill-gray-50"})})}):null,u?e.jsx("p",{children:"Something went wrong"}):e.jsx(w,{containerClassName:"grid grid-cols-1 md:grid-cols-2 gap-6",title:"",dataProvider:s==null?void 0:s.data,dataRenderer:a=>e.jsx(b,{title:a.title,category:a.category,address:a.address,city:a.city,discount:a.discount,id:a.id,image:a.image,lat:a.lat,lng:a.lng,rate:a.rate,rate_count:a.rate_count,link:m()+"/jobs/"+a.id},a.id),emptyFallback:e.jsxs("div",{className:"w-full p-10 grid place-items-center",children:[e.jsx("img",{alt:"no data",src:m()+"/images/noItem.png",className:"w-28 h-auto border border-purple-600 inline-block"}),e.jsx("p",{className:"text-sm text-slate-800 font-[vazirMedium] mt-3.5",children:"هیچ موردی وجود ندارد"})]}),loading:e.jsx("div",{className:"w-full h-72 grid place-items-center",children:e.jsxs("div",{className:`p-4 px-6 rounded-2xl flex flex-col items-center justify-center gap-y-5 bg-blue-500/80\r
            shadow-lg shadow-black/5`,children:[e.jsx("p",{className:"text-base text-slate-50 font-[vazir]",children:"درحال لود"}),e.jsx("div",{className:"w-10 h-10 border-t border-t-white rounded-full animate-spin"})]})}),isLoading:x})]})}export{M as default};
