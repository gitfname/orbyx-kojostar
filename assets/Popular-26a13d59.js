import{r as g,j as e,J as o}from"./index-db770455.js";import{u as p}from"./useSearchParams-56119927.js";import{a as x,n as m,o as h,B as f,D as y,p as j}from"./App-6afbcefa.js";import{s as w,S as b}from"./ShowJobsInMap-70095ebe.js";async function v({category_id:d=void 0,city_id:t=void 0,key:r=void 0}){return await w({type:1,key:r,category_id:d,city_id:t})}function E({className:d}){var n;const[t,r,l]=p(a=>[a.data.key,a.data.category_id,a.data.city_id]),{data:s,error:c,isLoading:i,mutate:u}=x("search/popular",async()=>v({category_id:r,city_id:l,key:t}),{shouldRetryOnError:!1,revalidateOnFocus:!1});return g.useEffect(()=>{u()},[t,l,r]),i?e.jsx(m,{}):e.jsxs("div",{className:"w-full h-max",children:[((n=s==null?void 0:s.data)==null?void 0:n.length)>0?e.jsx(b,{latlng:s.data.map(a=>({title:a.title,latlng:new h.LatLng(a.lat,a.lng)})),children:e.jsx("div",{className:`fixed z-30 bottom-4 left-4 p-3 rounded-xl bg-blue-500\r
      shadow-md shadow-black/10 grid place-items-center cursor-pointer`,children:e.jsx(f,{className:"w-4 h-4 fill-gray-50"})})}):null,c?e.jsx("p",{children:"Something went wrong"}):e.jsx(y,{containerClassName:"grid grid-cols-1 md:grid-cols-2 gap-6",title:"",dataProvider:s==null?void 0:s.data,dataRenderer:a=>e.jsx(j,{title:a.title,category:a.category,address:a.address,city:a.city,discount:a.discount,id:a.id,image:a.image,lat:a.lat,lng:a.lng,rate:a.rate,rate_count:a.rate_count,link:o()+"/jobs/"+a.id},a.id),emptyFallback:e.jsxs("div",{className:"w-full p-10 grid place-items-center",children:[e.jsx("img",{alt:"no data",src:o()+"/images/noItem.png",className:"w-28 h-auto border border-purple-600 inline-block"}),e.jsx("p",{className:"text-sm text-slate-800 font-[vazirMedium] mt-3.5",children:"هیچ موردی وجود ندارد"})]}),loading:e.jsx("div",{className:"w-full h-72 grid place-items-center",children:e.jsxs("div",{className:`p-4 px-6 rounded-2xl flex flex-col items-center justify-center gap-y-5 bg-blue-500/80\r
            shadow-lg shadow-black/5`,children:[e.jsx("p",{className:"text-base text-slate-50 font-[vazir]",children:"درحال لود"}),e.jsx("div",{className:"w-10 h-10 border-t border-t-white rounded-full animate-spin"})]})}),isLoading:i})]})}export{E as default};
